angular.module("twTwitter",["twTwitter.directives.twFeed","twTwitter.directives.twReport"]),angular.module("twTwitter.directives.twFeed",["twTwitter.services"]).directive("twFeed",["TwitterFeed",function(t){return{restrict:"E",transclude:!0,templateUrl:"/static/js/modules/tw.twitter/templates/tw.feed.html",scope:{trackingTerms:"@track"},link:function(t,e,r,i){t.tweets=[],t.$watch("trackingTerms",function(t,e){i.untrack(e),i.track(t)})},controller:["$scope",function(e){var r=this,i={tweet:[],track:[],untrack:[]};r.track=function(e){e&&(t.on(e,r.receive),r.emit("track",e))},r.untrack=function(e){e&&(t.untrack(e),r.emit("untrack",e))},r.receive=function(t){e.$apply(function(){e.tweets.unshift(t)}),r.emit("tweet",t)},r.emit=function(t,e){i[t].forEach(function(t){t(e)})},r.on=function(t,e){i[t].push(e)}}]}}]),angular.module("twTwitter.directives.twReport",["twTwitter.directives.twFeed"]).directive("twReport",function(){return{scope:!0,restrict:"E",require:"^twFeed",templateUrl:"/static/js/modules/tw.twitter/templates/tw.report.html",link:function(t,e,r,i){t.tweetCount=0,i.on("tweet",function(){++t.tweetCount}),i.on("track",function(e){t.trackedTerms=e})}}}),angular.module("twTwitter.services",[]).service("TwitterFeed",function(){this.on=function(t,e){var r=io.connect();r.emit("track",t),r.on("tweet",function(t){e(t)})},this.untrack=function(t){var e=io.connect();e.emit("untrack",t)}});